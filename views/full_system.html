<!DOCTYPE html><html><head><title></title><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" href="/images/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/images/favicon-128.png" sizes="128x128"><link rel="stylesheet" href="/modules/bootstrap/dist/css/bootstrap.css"><link rel="stylesheet" href="/modules/bootstrap5-toggle/css/bootstrap5-toggle.css"><link rel="stylesheet" href="/modules/highcharts/css/highcharts.scss"><link rel="stylesheet" href="stylesheets/default_style.css"><script src="/modules/jquery/dist/jquery.js" type="text/javascript"></script><script src="/modules/bootstrap/dist/js/bootstrap.bundle.js" type="text/javascript"></script><script src="/modules/bootstrap5-toggle/js/bootstrap5-toggle.js" type="text/javascript"></script><script src="/modules/highcharts/highcharts.js" type="text/javascript"></script><script src="javascripts/default_scripts.js" type="text/javascript"></script><script src="https://kit.fontawesome.com/fd56c7481d.js" crossorigin="anonymous" type="text/javascript"></script><meta name="application-name" content="pagetitle"><script src="javascripts/full_system.js" type="text/javascript"></script></head><body><div id="sidebar_wrapper"><nav class="colored" id="sidebar"><img id="exp_logo" src="/images/pancake.png" alt="Pancake" width="50" style="margin-top:10px"><ul class="list-unstyled components"><li class="colored" id="loberview"><a href="/devices"><i class="fas fa-eye"></i><span>Overview</span></a><a href="/systems"><i class="fas fa-object-group"></i><span>Systems</span></a><a href="/pipeline"><i class="fas fa-code-branch"></i><span>Pipeline</span></a><a href="/hosts"><i class="fas fa-server"></i><span>Hosts</span></a><a href="/shifts"><i class="fas fa-users"></i><span>Shifters</span></a><a href="/grafana"><i class="fas fa-chart-line"></i><span>Grafana</span></a><a href="/logs"><i class="fas fa-book"></i><span>Logs</span></a><a onclick="CommandDropdown()"><i class="fas fa-terminal"></i><span>Command</span></a><a href="http://10.4.73.233:8090"><i class="fas fa-camera"></i><span>Cameras</span></a></li></ul></nav></div><nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light" id="navbar"><div class="container-fluid"><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse justify-content-between" id="navbarSupportedContent"><ul class="navbar-nav" id="navbar_content"></ul><div id="select_experiment"><div class="dropdown"><a class="btn btn-primary dropdown-toggle" role="button" data-bs-toggle="dropdown" onchange="ChangeExperiment()"></a><ul class="dropdown-menu"><li><a class="dropdown-item" onclick="ChangeExperiment('xebra')">XeBRA</a></li><li><a class="dropdown-item" onclick="ChangeExperiment('pancake')">PANCAKE</a></li></ul></div></div><div id="login"><div class="nav-item dropdown" style="padding-right: 0px"><a class="nav-link dropdown-toggle" id="login_dropdown" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false"></a><div class="dropdown-menu dropdown-menu-end p-2" style="width:300px"><div class="text-center mt-2"><a class="btn btn-dark" id="login_button" href="/auth/github"><i class="fab fa-github"></i><span>&nbsp; Login with GitHub</span></a><a class="btn btn-dark" id="logout_button" href="/logout"><i class="fa-solid fa-right-from-bracket"></i><span>&nbsp; Logout</span></a></div><hr><ol class="ps-4"><li>You must be part of the AG Schumann GitHub organization. If you aren't, ask one of the owners to add you.</li><li>Set your membership to 'public' in the&nbsp;<a href="https://github.com/orgs/AG-Schumann/people" target="_blank" rel="noopener noreferrer">settings of the organization.</a></li><li>Click the button above and log in with your GitHub credentials.</li></ol></div></div></div></div></div></nav><div class="toast bg-success translate-middle-x" id="notify_success" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-body"></div></div><div class="toast bg-danger translate-middle-x" id="notify_error" role="alert" aria-live="assertive" aria-atomic="true"><div class="toast-body"></div></div><div class="modal fade" id="sensorbox" tabindex="-1" aria-labelledby="sensorboxLabel" aria-hidden="true"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="detail_sensor_name"></h5><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body row"><div class="col-lg-6"><h5>General info</h5><br><table><tbody><tr><th class="py-2">Status</th><td><input id="sensor_status" type="checkbox" data-size="sm" data-width="65px" data-toggle="toggle" data-onstyle="success" data-offstyle="warning" data-on="Online" data-off="Offline"></td></tr><tr><th class="py-2">Device</th><td><button class="btn btn-primary btn-sm" id="sensor_device_name"></button></td></tr><tr><th class="py-2">Description</th><td><input class="form-control-sm" type="text" id="sensor_desc" name="sensor_desc" size="4"></td></tr><tr><th class="py-2">Readout interval &nbsp;</th><td><input class="form-control-sm" type="number" id="readout_interval" name="readout_interval" max="300" size="4"><span>&nbsp; s</span></td></tr><tr><th class="py-2">Units</th><td id="sensor_units"></td></tr><tr><th class="py-2">Readout command &nbsp;</th><td id="readout_command" style="font-family:&quot;Courier New&quot;,monospace"></td></tr><tr><th class="py-2">Transform:</th><td><input class="form-control-sm" type="text" id="value_xform" name="value_xform" placeholder="0,1"></td></tr><tr><th class="py-2"><button class="btn btn-primary" onclick="UpdateSensor()">Update</button></th></tr></tbody></table><hr><h5>Alarms</h5><br><table><tbody><tr><th>Low</th><th>High</th></tr><tr><td><input class="form-control-sm" type="number" id="alarm_low" name="alarm_low" size="6"></td><td><input class="form-control-sm" type="number" id="alarm_high" name="alarm_high" size="6"></td></tr><tr><th>Setpoint</th><th>Half-range</th></tr><tr><td><input class="form-control-sm" type="number" id="alarm_mid" name="alarm_mid" size="6"></td><td><input class="form-control-sm" type="number" id="alarm_range" name="alarm_range" size="6"></td></tr><tr><th>Recurrence</th><th>Base level</th></tr><tr><td><input class="form-control-sm" type="number" id="alarm_recurrence" name="alarm_recurrence" min="1" step="1" size="8"></td><td><input class="form-control-sm" type="number" id="alarm_baselevel" name="alarm_baselevel" min="0" step="1" max="3" size="8"></td></tr><tr><th class="py-2" colspan="2"><button class="btn btn-primary" id="change_alarms" onclick="UpdateAlarms()">Update alarm</button></th></tr></tbody></table></div><div class="col-lg-6"><div id="sensor_control"><h5>Control</h5><span id="control_target" hidden></span><br><table><tbody><tr id="sensor_valve"><td><button class="btn btn-primary" id="sensor_valve_btn" onclick="ToggleValve()">Toggle</button></td><td><span id="current_valve_state" hidden></span></td></tr><tr id="sensor_setpoint"><td><input class="form-control" type="number" id="sensor_setpoint_control" name="sensor_setpoint_control" size="8"></td><td><button class="btn btn-primary" id="sensor_setpoint_btn" onclick="ChangeSetpoint()">Set</button></td></tr></tbody></table><hr></div><h5>Pipelines involving this sensor</h5><br><table class="table" id="pipelines_of_sensor_table" style="width:100%;"><thead><tr><th colspan="2">Active</th></tr></thead><tbody id="pipelines_active"></tbody><thead><tr><th colspan="2">Silenced</th></tr></thead><tbody id="pipelines_silenced"></tbody><thead><tr><th colspan="2">Inactive</th></tr></thead><tbody id="pipelines_inactive"></tbody></table><button class="btn btn-primary" id="make_alarm_button" onclick="MakeAlarm()">Make new alarm</button><hr><h5>Recent history</h5><br><table><tbody><tr><th class="py2">Last value</th><td id="last_value">XXX</td></tr></tbody></table><div class="d-flex flex-row"><div class="mr-auto p-2"><input id="plot_alarms" type="checkbox" data-toggle="toggle" data-width="150px" data-on="&lt;i class=&quot;fa-solid fa-eye&quot;&gt;&lt;/i&gt;&amp;nbsp thresholds" data-off="&lt;i class=&quot;fa-regular fa-eye-slash&quot;&gt;&lt;/i&gt;&amp;nbsp thresholds" data-onstyle="danger" data-offstyle="secondary" onchange="DrawSensorHistory()"><input id="plot_log" type="checkbox" data-toggle="toggle" data-width="80px" data-on="log" data-off="linear" data-onstyle="primary" data-offstyle="secondary" onchange="DrawSensorHistory()"></div><div class="p-2" style="margin-left:auto"><select class="form-select" id="selectinterval" onchange="DrawSensorHistory()"><option value="0">10m</option><option value="1">1h</option><option value="2">3h</option><option value="3">6h</option><option value="4" selected>12h</option><option value="5">24h</option><option value="6">48h</option><option value="7">72h</option><option value="8">1w</option><option value="9">2w</option><option value="10">4w</option></select></div><div class="p-2"><button class="btn btn-outline-secondary mx-1" id="refresh_btn" onclick="DrawSensorHistory()"><i class="fa fa-sync-alt"></i></button></div></div><div class="container sensor_chart" id="sensor_chart"></div></div></div><div class="modal-footer"><button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Close</button></div></div></div></div><div class="modal fade" id="devicebox"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="deviceboxLabel"><span id="detail_device_name"></span></h5><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body row"><div class="col-lg-6"><button class="btn btn-danger me-3 mb-2" id="device_ctrl_btn">?</button><button class="btn btn-warning mb-2" id="device_manage_btn">?</button><form id="update_device_form"><hr><h5>General info</h5><table><tbody><tr><th class="py-3">Host &nbsp;</th><td><input type="text" id="device_host" name="device_host"></td></tr><tr class="device_eth"><th class="py-3">IP</th><td><input type="text" id="device_ip" name="device_ip" pattern="^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"></td></tr><tr class="device_eth"><th class="py-3">Port</th><td><input type="number" id="device_port" name="device_port" min="1025" max="65535" step="1"></td></tr><tr class="device_serial"><th class="py-3">TTY</th><td><input type="text" id="device_tty" name="device_tty"></td></tr><tr class="device_serial"><th class="py-3">Baud</th><td><select id="device_baud" name="device_baud"><option value="9600">9600</option><option value="19200">19,200</option></select></td></tr><tr class="device_serial"><th class="py-3">SerialID &nbsp;</th><td><input type="text" id="device_serial_id" name="device_serial_id"></td></tr></tbody></table></form><hr><h5> Commands</h5><br><span>Accepted commands:</span><ul id="device_commands_list"></ul><div class="input-group mb-3"><input class="form-control" id="device_command" type="text" placeholder="Command"><button class="btn btn-primary" type="button" onclick="DeviceCommand()">Send</button></div></div><div class="col-lg-6"><h5>This device's sensors:</h5><br><ul id="device_sensors"></ul></div></div><div class="modal-footer"><button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Close</button><button class="btn btn-primary" type="button">Save changes</button></div></div></div></div><div class="modal fade" id="newsensor" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Add new sensor</h5><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body row"><table><tbody><tr><th class="py-3">Subsystem</th><td><select class="form-select" id="new_subsystem" name="new_subsystem"></select></td></tr><tr><th class="py-3">Topic</th><td><select class="form-select" id="new_topic" name="new_topic"></select></td></tr><tr><th class="py-3">Device</th><td><select class="form-select" id="new_device" name="new_device"></select></td></tr><tr><th class="py-3">Description</th><td><input class="form-control" type="text" id="new_description" name="new_description"></td></tr><tr><th class="py-3">Readout interval</th><td><input class="form-control" type="number" id="new_readout_interval" name="new_readout_interval"></td></tr><tr><th class="py-3">Units</th><td><input class="form-control" type="text" id="new_units" name="new_units"></td></tr><tr><th class="py-3">Readout command</th><td><input class="form-control" type="text" id="new_readout_command" name="new_readout_command"></td></tr><tr><th class="py-3">Transform</th><td><input class="form-control" type="text" id="new_value_xform" name="new_value_xform" placeholder="0,1"></td></tr><tr><th class="py-3">Integer quantity?</th><td><input type="checkbox" id="new_integer" name="new_integer"></td></tr><tr><th class="py-3">Control value</th><td><input class="form-control" type="text" id="new_control" name="new_control"></td></tr></tbody></table></div><div class="modal-footer"><button class="btn btn-success" id="validate_btn" type="button" onclick="ValidateNewSensor()">Validate</button><button class="btn btn-warning" id="newsensor_btn" onclick="SubmitNewSensor()">Submit</button></div></div></div></div><div class="modal fade" id="commandbox" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Send command:</h5><button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body row"><div class="col-md-4"><select class="form-select" id="command_to" onchange="GetAcceptedCommands($('#command_to option:selected').text())"><option value="" disabled selected hidden>Select device</option></select></div><div class="col-md-8"><div class="input-group mb-3"><input class="form-control" id="command" type="text" placeholder="Command"><button class="btn btn-primary" type="button" onclick="DeviceCommand($('#command_to').val(), $('#command').val())">Send</button></div></div><span>Accepted commands:<ul id="accepted_commands_list"></ul></span></div></div></div></div><div class="main-container"><table class="table table-hover table-striped" data-bs-spy="scroll" data-bs-target="#navbar" data-bs-offset="0" id="sensor_table"></table></div><script>$(document).ready(function () {
  PopulateNavbar();
  GetGroupedSensors();
  PopulateSensors();
  setInterval(UpdateOnce, 5000);
  var query_search = new URLSearchParams(window.location.search);
  if (query_search.has('notify_msg')) {
    Notify(query_search.get('notify_msg'), query_search.get('notify_status'));
  };
});</script><script>$(document).ready(()=>{
  $('[data-bs-toggle="tooltip"]').tooltip({trigger: 'hover'});
  if ($("#login_dropdown").html() == 'Login') {
    $("#login_button").show();
    $("#logout_button").hide();
  }
  else {
    $("#login_button").hide();
    $("#logout_button").show();
  }
});
$("#sensorbox").on('hide.bs.modal', function () {
  $("#selectinterval").val(3);
});</script></body></html>
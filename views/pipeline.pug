extends layout
block extrahead
  link(rel="stylesheet" href="stylesheets/jsoneditor.css")
  link(rel="stylesheet" href="stylesheets/pipeline.css")
  script(src="javascripts/jsoneditor.min.js" type="text/javascript")
  script(src="javascripts/pipeline.js" type="text/javascript")

block content
  div.main-container
    h3 Pipeline control
    h4 Active pipelines
      table#active_pipelines.pipeline_table
        tr
          th Name
          th Stop
          th Restart
          th Reconfigure
    h4 Inactive pipelines
      table#inactive_pipelines.pipeline_table
        tr
          th Name
          th Start
    div#pipeline_vis

  div.main-container
    h3 Pipeline configuration

    div.row(style="height: 50px")
      div.col-xs-6.col-sm-3
        select.form-control#pipeline_select(title='Select a pipeline' disabled)
      div.col-xs-6.col-sm-3
        button#fetch_pipeline_button.btn.btn-info(onclick="Fetch($('#pipeline_select').val())") Fetch
    br
    div#json_text(style="width:100%;height:75%;resize:both")
    br
    button.btn-btn-info(onclick="VisualizeConfig()") Visualize
    button.btn.btn-default(onclick="AddNewPipeline()") Add new
    button.btn.btn-default(onclick="UpdatePipeline(0)") Update and restart
    button.btn.btn-default(onclick="UpdatePipeline(1)") Update and reconfigure
    span#load_me(hidden disabled) #load

  script.
    $(document).ready(function() {
      PopulatePipelines();
      if ($("#load_me").html() != 'undefined')

extends layout
block extrahead
  link(rel="stylesheet" href="stylesheets/jsoneditor.min.css")
  link(rel="stylesheet" href="stylesheets/pipeline.css")
  link(rel="stylesheet" href="stylesheets/highcharts.css")
  script(src="javascripts/jsoneditor.min.js" type="text/javascript")
  script(src="javascripts/pipeline.js" type="text/javascript")
  script(src="javascripts/highcharts.js" type="text/javascript")
  script(src="javascripts/highcharts-more.js" type="text/javascript")
  script(src="javascripts/sankey.js" type="text/javascript")
  script(src="javascripts/organization.js" type="text/javascript")

block content
  div.main-container(style="width:100%")
    h2 Pipeline control
    div
      h4 Active pipelines
        table#active_pipelines.pipeline_table
          tr
            th Name
            th Stop
            th Restart
            th Reconfigure
      h4 Inactive pipelines
        table#inactive_pipelines.pipeline_table
          tr
            th Name
            th Start
    div#pipeline_vis

  div.main-container
    h2 Pipeline configuration
    span See this wiki page for details: &nbsp;
      a(href="https://wiki.uni-freiburg.de/app/doku.php?id=start:ultimate:slow_control:pipeline_config_ref") here
    div.row(style="height: 50px")
      select.form-control#pipeline_select(title='Select a pipeline')
      button#fetch_pipeline_button.btn.btn-info(onclick="Fetch($('#pipeline_select').val())") Fetch
    br
    div#json_text(style="width:100%;height:75%;resize:both")
    br
    button.btn-btn-info(onclick="VisualizeConfig()") Visualize
    button.btn.btn-default(onclick="AddNewPipeline()") Add new
    button.btn.btn-default(onclick="UpdatePipeline(0)") Update and restart
    button.btn.btn-default(onclick="UpdatePipeline(1)") Update and reconfigure
    button.btn.btn-warning(onclick="DeletePipeline()") Delete
    span#load_me(hidden disabled) #load

  script.
    $(document).ready(function() {
      PopulatePipelines();
      document.jsoneditor = new JSONEditor(document.getElementById('json_text',
      {"modes":  ['tree', 'view', 'form', 'code', 'text']}));
    });

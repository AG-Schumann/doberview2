extends layout
block content
  div.main-container(style="height:960px")
    iframe#grafana_embed(src=`${grafana_url}` title="Grafana" style="width:100%;height:100%")


  script.
    $(document).ready(function() {
      const currentTheme = $(':root').attr('data-bs-theme');
      let frame = $('iframe#grafana_embed');
      const url = frame.attr('src');
      frame.attr('src', url+`&theme=${currentTheme}`);
    });
    $('#bd-theme').on('click', function() {
      const currentTheme = $(':root').attr('data-bs-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      let frame = $('iframe#grafana_embed');
      const url = frame.attr('src');
      const new_url = url.split('&theme=')[0] + `&theme=${newTheme}`;
      frame.attr('src', new_url);
    });
extends layout

block extrahead
  link(href="https://unpkg.com/tabulator-tables@5.0.10/dist/css/tabulator.min.css" rel="stylesheet")
  link(rel="stylesheet" href="stylesheets/jquery.datetimepicker.css")
  script(type="text/javascript" src="https://unpkg.com/tabulator-tables@5.0.10/dist/js/tabulator.min.js")
  script(type="text/javascript" src="javascripts/logs.js")
  script(type="text/javascript" src="javascripts/jquery.datetimepicker.full.min.js")


block content
  div.main-container
    .d-flex.flex-row.mr-auto
      div.mt-4
        input#query_mode(type="checkbox" data-toggle='toggle' data-width='100px' data-on='from-to' data-off='last X', onchange='ToggleQueryMode()')
      #get_num
        label last X values: &nbsp;
        input.form-control(type="number", id='get_num_input', value=200, step=10, min=0)
      #from_selector(style="display:none")
        label from (UTC): &nbsp;
        input.form-control(type="text", id="from_selector_input")
      #to_selector(style="display:none")
        label to (UTC): &nbsp;
        input.form-control(type="text", id="to_selector_input")
      div
        label(for="min_severity") min. severity: &nbsp;
        select.form-select(id="min_severity")
          option(value="30" selected="selected") Warning
          option(value="40") Error
          option(value="50") Critical
      div
        label(for="get_name") filter name:
        input.form-control#get_name(type="text")
      div.mt-4
        button.btn.btn-primary(onclick="GetLogs()") Fetch
    div.mt-2#log_table



  script.
    $(document).ready(function() {
      PopulateNavbar();
      setInterval(UpdateClock, 500);
      GetLogs();
    });
    $('#from_selector_input').datetimepicker({
      format: "Y-m-d H:i:s",
      value: now_minus_hours(1),
      showTimezone: true,
    });
    $('#to_selector_input').datetimepicker({
      format: "Y-m-d H:i:s",
      value: now_utc(),
      showTimezone: true,
      timezone: "UTC"
    });


